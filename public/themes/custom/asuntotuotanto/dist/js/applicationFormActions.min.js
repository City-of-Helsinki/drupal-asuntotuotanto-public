!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(a,r,function(e){return t[e]}.bind(null,r));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../",e(e.s=12)}({12:function(t,e,n){t.exports=n(13)},13:function(){var t,e;t=jQuery,(e=Drupal).behaviors.applicationFormActions={attach:function(){const n=document.getElementById("application_form_apartments_list"),a=()=>n.getElementsByClassName("application-form__apartments-item").length;new MutationObserver(t=>{t.forEach(t=>{"childList"===t.type&&[...document.getElementsByClassName("application-form__apartments-item")].map(t=>{const e=t.querySelectorAll("button[data-list-position-action-button]"),n=[...t.parentElement.children].indexOf(t);t.classList.contains("application-form__apartments-item--with-select")||(0===n&&!t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(e[0].disabled=!0,e[1].disabled=!1),0<n&&n<a()-1&&(t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")?(e[0].disabled=!1,e[1].disabled=!0):(e[0].disabled=!1,e[1].disabled=!1)),n===a()-1&&(e[0].disabled=!1,e[1].disabled=!0))})})}).observe(n,{childList:!0});const r=(t,n,a)=>{const r=document.createElement("p");r.classList.add(...t);const i=document.createElement("span"),o=document.createTextNode(e.t(n));i.classList.add("visually-hidden"),i.appendChild(o);const l=document.createElement("span"),s=document.createTextNode(a);return l.appendChild(s),r.append(i,l),r},i=(t,n,a=!1)=>{const r=document.createElement("button");r.classList.add(...t);const i=document.createElement("span"),o=document.createTextNode(e.t(n));return i.append(o),r.append(i),r.setAttribute("type","button"),a&&(r.disabled=!0),r},o=(t,n)=>{const a=document.createElement("li"),r=document.createElement("span"),i=document.createTextNode(e.t(t));r.appendChild(i);const o=document.createElement("span"),l=document.createTextNode(e.t(n));return o.appendChild(l),a.append(r,o),a},l=()=>{const t=document.createElement("div");t.classList.add("application-form-apartment__apartment-add-actions-wrapper");const n=a()-1,r="apartment_list_select_"+n,i=document.createElement("div");i.classList.add("hds-select-element");const o=document.createElement("label"),l=document.createTextNode(e.t("Apartment"));o.appendChild(l),o.setAttribute("for",r);const s=document.createElement("div");s.classList.add("hds-select-element__select-wrapper");const p=[...document.querySelectorAll('[data-drupal-selector="edit-apartment"] > table select')].filter(t=>t.getAttribute("data-drupal-selector").includes("-id")).map(t=>t.value).filter(t=>"0"!==t),c=(()=>{const t=document.querySelector('[data-drupal-selector="edit-apartment-0-id"]').parentElement.parentElement.parentElement.parentElement.parentElement,e=t.children.length;return t.children[e-1].getElementsByTagName("select")[0]})().cloneNode(!0);return[...c.options].map((t,e)=>{if(0<e){const e=t.innerHTML.split(" | ");t.innerHTML=`${e[0]} | ${e[1]} | ${e[3]}`}}),c.classList.add("hds-select-element__select"),c.setAttribute("id",r),c.setAttribute("data-id",n),c.setAttribute("data-drupal-selector","custom_apartment_select"),[...c.options].filter(t=>p.includes(t.value)).forEach(t=>{c.removeChild(t)}),c.addEventListener("change",({target:t})=>{const e=document.querySelector(`[data-drupal-selector="edit-apartment-${n}-id"]`),r=document.getElementsByClassName("application-form-apartment__apartment-add-button")[0],i=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;i.setAttribute("data-id",n),e.value=t.value,i.classList.remove("application-form__apartments-item--with-select");const o=e.options[e.selectedIndex].text.split(" | "),l={apartment_number:o[0],apartment_structure:o[1],apartment_floor:o[2],apartment_living_area_size:o[3],apartment_sales_price:o[4],apartment_debt_free_sales_price:o[5]};i.innerHTML=m(l,t.value).innerHTML;const s=[...i.parentElement.children].indexOf(i);0===s&&(i.querySelector("button").disabled=!0),s===a()-1&&(i.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),0<s&&(i.previousElementSibling.querySelector('button[data-list-position-action-button="lower"]').disabled=!1),i.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(i.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),r&&r.removeAttribute("disabled")}),s.appendChild(c),i.append(o,s),t.appendChild(i),t},s=(t,e=[])=>{const n=document.createElement(t);return n.classList.add(...e),n},p=(t,e)=>{const n=document.querySelector(`[name="apartment[${t}][_weight]"]`),a=document.querySelector(`[name="apartment[${e}][_weight]"]`),r=n.value;n.value=a.value,a.value=r},c=({target:t})=>{"raise"===t.getAttribute("data-list-position-action-button")&&(t=>{const e=t.parentElement.parentElement.parentElement,n=e.previousElementSibling;null!==n&&(n.before(e),p(e.getAttribute("data-id"),n.getAttribute("data-id")))})(t),"lower"===t.getAttribute("data-list-position-action-button")&&(t=>{const e=t.parentElement.parentElement.parentElement,n=e.nextElementSibling;null===n||n.classList.contains("application-form__apartments-item--with-select")||(n.after(e),p(e.getAttribute("data-id"),n.getAttribute("data-id")))})(t)},d=({target:e})=>{const n=t('[data-drupal-selector="edit-apartment-add-more"]');5>=a()&&1<a()&&n.mousedown();const r=e.parentElement;e.parentElement.parentElement.parentElement.parentElement.addEventListener("click",c),r.appendChild(l()),e.remove(),(()=>{const t=document.querySelectorAll('[data-drupal-selector="custom_apartment_select"]');t[t.length-1].focus()})(),5>a()&&u()},m=(t,n,l=!1)=>{const{apartment_number:p,apartment_structure:c,apartment_floor:m,apartment_living_area_size:u,apartment_sales_price:_,apartment_debt_free_sales_price:b}=t,f=s("li",["application-form__apartments-item"]);l&&f.classList.add("application-form__apartments-item--with-select");const E=s("article",["application-form-apartment"]),h=r(["application-form-apartment__list-position","is-desktop"],"List position",""),v=s("div",["application-form-apartment__header"]),g=r(["application-form-apartment__list-position","is-mobile"],"List position",""),y=r(["application-form-apartment__apartment-number"],"Apartment",p),L=r(["application-form-apartment__apartment-structure"],"Apartment structure",c),A=i(["application-form-apartment__apartment-add-button"],"Add an apartment to the list");A.addEventListener("click",d),0<a()&&A.setAttribute("disabled",!0),l?v.append(g,A):v.append(g,y,L);const S=document.createElement("div");S.classList.add("application-form-apartment__list-position-actions");const w=i("","Raise on the list",l&&!0);w.setAttribute("data-list-position-action-button","raise");const x=i("","Lower on the list",l&&!0);x.setAttribute("data-list-position-action-button","lower"),S.append(w,x);const C=s("ul",["application-form-apartment__information"]),T=o("Floor",m),N=o("Living area size",u),q=o("Sales price",_),O=o("Debt free sales price",b);C.append(T,N,q,O);const M=s("div",["application-form-apartment__actions"]),j=i("","Delete"),$=document.createElement("a"),B=document.createTextNode(e.t("Open apartment page"));return $.appendChild(B),$.setAttribute("href",`${window.location.origin}/apartment/${n}`),M.append(j,$),l?E.append(h,v,S):E.append(h,v,S,C,M),f.appendChild(E),f},u=()=>{n.append(m({},null,!0))};0===a()&&u()}}}});